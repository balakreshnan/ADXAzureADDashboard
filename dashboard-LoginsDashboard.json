{"$schema":"https://dataexplorer.azure.com/static/d/schema/33/dashboard.json","id":"0f7e426d-94d8-4444-8e63-3125f1dbb892","eTag":"TWqqsa8M0s8wpiV0XuF+Jg==","schema_version":"33","title":"LoginsDashboard","autoRefresh":{"enabled":false},"sharedQueries":[],"tiles":[{"id":"a22b538c-7ffb-4e6a-8d20-fd250b64ce5e","title":"Employee Count","visualType":"map","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":0,"y":0,"width":13,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n//| distinct callerIpAddress, identity\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where logintime  between (_startTime.._endTime)\n| where OfficeProvider has_any (_OfficeProvider)\n| where identity  has_any (_employee)\n| project geocolatitude, geocolongitude, operationName, OfficeProvider, identity, callerIpAddress\n| summarize peoplecount = dcount(callerIpAddress), identitycount=dcount(identity) by OfficeProvider, geocolongitude = tostring(geocolongitude), geocolatitude = tostring(geocolatitude)\n//| render scatterchart with (kind = map)\n//| render scatterchart with (kind = map, xcolumn = geocolongitude, ycolumns = geocolatitude, series = OfficeProvider)"},"visualOptions":{"hideTileTitle":false,"map__type":"bubble","map__latitudeColumn":{"type":"specified","value":"geocolatitude"},"map__longitudeColumn":{"type":"specified","value":"geocolongitude"},"map__labelColumn":{"type":"specified","value":"peoplecount"},"map__sizeColumn":{"type":"specified","value":"peoplecount"},"map__sizeDisabled":false,"map__geoType":"numeric","map__geoPointColumn":{"type":"infer"},"pie__TopNSlices":null}},{"id":"77b2a0c3-1022-47c4-a43f-7936fd6503e9","title":"Employee Count Daily by Office Location","visualType":"column","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":11,"y":48,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where OfficeProvider has_any (_OfficeProvider)\n| where logintime  between (_startTime.._endTime)\n| where identity  has_any (_employee)\n| summarize location=max(OfficeProvider), peoplecount = dcount(identity) by bin(logintime, 1d)"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"logintime"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"66cc4897-6b7d-40bf-b84a-1da5d7c9cfd9","title":"Employee Count Daily by Office Location","visualType":"pie","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":13,"y":0,"width":9,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where logintime  between (_startTime.._endTime)\n| where identity  has_any (_employee)\n| where OfficeProvider   has_any (_OfficeProvider)\n| summarize location=max(OfficeProvider), peoplecount = dcount(identity) by OfficeProvider"},"visualOptions":{"hideTileTitle":false,"hideLegend":false,"xColumn":{"type":"specified","value":"OfficeProvider"},"yColumns":{"type":"specified","value":["peoplecount"]},"seriesColumns":{"type":"specified","value":["location"]},"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"name","pie__kind":"pie","pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"741a784a-57fa-4f4f-87d7-f2223c6a84ff","title":"Anomaly Employee Count Daily by Office Location","visualType":"anomalychart","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":0,"y":18,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where OfficeProvider has_any (_OfficeProvider)\n| where logintime  between (_startTime.._endTime)\n| where identity  has_any (_employee)\n| summarize location=max(OfficeProvider), peoplecount = dcount(identity) by bin(logintime, 1d)"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"logintime"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"c265f2cc-5ee7-4287-9c1d-e390c61238a4","title":"Employee Count Daily by Office Location","visualType":"funnel","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":13,"y":9,"width":9,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where OfficeProvider has_any (_OfficeProvider)\n| where logintime  between (_startTime.._endTime)\n| where identity  has_any (_employee)\n| summarize location=max(OfficeProvider), peoplecount = dcount(identity) by bin(logintime, 1d)"},"visualOptions":{"hideTileTitle":false,"xColumn":{"type":"specified","value":"location"},"yColumns":{"type":"infer"},"crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"a57ab67d-5cdc-4822-9c2c-05f2d3be537f","title":"Employee Count Daily by Office Location","visualType":"area","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":11,"y":28,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where OfficeProvider has_any (_OfficeProvider)\n| where logintime  between (_startTime.._endTime)\n| where identity  has_any (_employee)\n| summarize location=max(OfficeProvider), peoplecount = dcount(identity) by bin(logintime, 1d)"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"logintime"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"c7be477c-a273-414b-9781-0d00d35e9bc5","title":"Employee Trend by Office","visualType":"timechart","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":0,"y":38,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where OfficeProvider has_any (_OfficeProvider)\n| where logintime  between (_startTime.._endTime)\n| where identity  has_any (_employee)\n| summarize location=max(OfficeProvider), peoplecount = dcount(identity) by bin(logintime, 1d)"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[{"id":"a3c47842-1132-41c5-9a21-2d0837eadbd2","value":15},{"id":"4e2d4da4-8025-418d-97f4-a52aa9a34d55","value":37}]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"logintime"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"e764a602-d191-4d52-b15c-e8e792f7abea","title":"Forecast Azure AD based Employee Usage","visualType":"timechart","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":11,"y":18,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where OfficeProvider has_any (_OfficeProvider)\n| where logintime  between (_startTime.._endTime)\n| where identity  has_any (_employee)\n| summarize location=max(OfficeProvider), peoplecount = dcount(identity) by bin(logintime, 1d)\n| project location, peoplecount, logintime\n| make-series y=max(peoplecount) on logintime from _startTime to _endTime+1*7*1d step 1d // create a time series of 5 weeks (last week is empty)\n| extend y_forcasted = series_decompose_forecast(todynamic(tostring(y)), 1*7, 168, 'linefit', 0.4)  // forecast a week forward"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"logintime"},"yColumns":{"type":"specified","value":["y","y_forcasted"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"01309317-9b14-42b8-a3ab-2454541dd0db","title":"Cluster Employee Count Daily by Office Location","visualType":"column","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":0,"y":28,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where OfficeProvider has_any (_OfficeProvider)\n| where logintime  between (_startTime.._endTime)\n| where identity  has_any (_employee)\n//| summarize location=max(OfficeProvider), peoplecount = count() by bin(logintime, 1d)\n| evaluate autocluster()"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[{"id":"bf9d040a-3fc3-477e-8585-1e824a42619e","value":350}]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"SegmentId"},"yColumns":{"type":"specified","value":["Count"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"c75822c2-50f6-4e20-808c-c7717cbe41b7","title":"Trends by People","visualType":"column","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":11,"y":38,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where OfficeProvider has_any (_OfficeProvider)\n| where logintime  between (_startTime.._endTime)\n| where identity  has_any (_employee)\n| summarize peoplecount = dcount(identity) by bin(logintime, 1d)"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"logintime"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"66f40470-e8fe-496f-af1d-1ae4a27cf783","title":"Trends by Office","visualType":"column","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":0,"y":48,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where OfficeProvider has_any (_OfficeProvider)\n| where logintime  between (_startTime.._endTime)\n| where identity  has_any (_employee)\n| summarize location=dcount(OfficeProvider) by bin(logintime, 1d)"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"logintime"},"yColumns":{"type":"specified","value":["location"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"548ac4dc-ecd1-41c3-8d92-dad8d7d1e711","title":"Meeting Forecasting Trends by Time","visualType":"timechart","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":0,"y":67,"width":11,"height":10},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_employee","_endTime","_startTime"],"text":"iamlogssignin\n| mv-expand  r = data.records\n| project callerIpAddress = tostring(r.callerIpAddress), identity = tostring(r.identity), \nrlocal = tostring(r.location), loc1city = tostring(r.properties.location.city), loc1state = tostring(r.properties.location.state),\ngeocolatitude = tostring(r.properties.location.geoCoordinates.latitude),\ngeocolongitude = tostring(r.properties.location.geoCoordinates.longitude),\nlogintime = todatetime(tostring(r.['time'])), operationName = tostring(r.operationName),\nemail = tostring(r.properties.userPrincipalName)\n| join kind=inner Officelocations on $left.callerIpAddress == $right.callerIpAddress\n| where logintime  between (_startTime.._endTime)\n| where OfficeProvider has_any (_OfficeProvider)\n| where identity  has_any (_employee)\n| join kind=inner MeetingInvitees on $left.email == $right.email\n| project geocolatitude, geocolongitude, operationName, OfficeProvider, identity, callerIpAddress, Name, id, logintime\n| summarize meetincount = dcount(Name), peoplecount = dcount(callerIpAddress), identitycount=dcount(identity) by bin(logintime,1d)\n| project meetincount, peoplecount, logintime\n| make-series y=max(peoplecount) on logintime from _startTime to _endTime+1*7*1d step 1d // create a time series of 5 weeks (last week is empty)\n| extend y_forcasted = series_decompose_forecast(todynamic(tostring(y)), 1*7, 168, 'linefit', 0.4)  // forecast a week forward"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"logintime"},"yColumns":{"type":"specified","value":["meetincount","y","y_forcasted"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"0cbac367-e16e-4f91-b103-e65ede0f94be","title":"AI Employee Count by Office Location","visualType":"column","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":0,"y":9,"width":13,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_endTime","_startTime"],"text":"peopletelemetry\n| where facedetected > 0\n| where distance > 0\n| where direction == 'closer'\n| where officelocation  has_any (_OfficeProvider)\n| where peopletime   between (_startTime.._endTime)\n| summarize location=max(officelocation), peoplecount = dcount(peopletime) by bin(peopletime, 1d)"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"peopletime"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"pie__TopNSlices":null,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"5c64d6ca-6f3e-49e0-a174-1fca142d2344","title":"AI People Counting - Anamoly","visualType":"anomalychart","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":0,"y":58,"width":11,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_endTime","_startTime"],"text":"peopletelemetry\n| where facedetected > 0\n| where distance > 0\n| where direction == 'closer'\n| where officelocation  has_any (_OfficeProvider)\n| where peopletime   between (_startTime.._endTime)\n| summarize location=max(officelocation), peoplecount = dcount(peopletime) by bin(peopletime, 1d)"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"peopletime"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}},{"id":"1d34fbf4-7621-4c00-80d0-9769a2f9bcc7","title":"AI People Counting - Forecasting","visualType":"anomalychart","pageId":"9136329e-3de6-41a4-9442-06b5206beb41","layout":{"x":11,"y":58,"width":11,"height":9},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":["_OfficeProvider","_endTime","_startTime"],"text":"peopletelemetry\n| where facedetected > 0\n| where distance > 0\n| where direction == 'closer'\n| where officelocation  has_any (_OfficeProvider)\n| where peopletime   between (_startTime.._endTime)\n| summarize location=max(officelocation), peoplecount = dcount(peopletime) by bin(peopletime, 1d)\n| project location, peoplecount, peopletime\n| make-series y=max(peoplecount) on peopletime from _startTime to _endTime+1*7*1d step 1d // create a time series of 5 weeks (last week is empty)\n| extend y_forcasted = series_decompose_forecast(todynamic(tostring(y)), 1*7, 168, 'linefit', 0.4)  // forecast a week forward"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"Employee Count","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"Office Locations","xColumn":{"type":"specified","value":"peopletime"},"yColumns":{"type":"infer"},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"location","parameterId":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","disabled":false}],"drillthrough":[]}}],"parameters":[{"kind":"duration","id":"69fb31b7-c407-49c1-9dcb-fc1a81b1c616","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":365,"unit":"days"},"showOnPages":{"kind":"all"}},{"kind":"string","id":"21b8bf1b-e1db-4a06-9cba-16c7a0f1f9fa","displayName":"OfficeProvider","variableName":"_OfficeProvider","selectionType":"array","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":[],"text":"Officelocations\n| project OfficeProvider\n\n"},"columns":{"value":"OfficeProvider"}},"showOnPages":{"kind":"all"}},{"kind":"string","id":"71c99866-990e-4c3d-bac0-1751083891d8","displayName":"Employee","variableName":"_employee","selectionType":"array","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc"},"usedVariables":[],"text":"// Please enter your KQL query (Example):\n// <table name>\n// | where <datetime column> between (['_startTime'] .. ['_endTime']) // Time range filtering\n// | where isempty(['_OfficeProvider']) or <column name> in (['_OfficeProvider']) // Multiple selection filtering\n// | take 100\nemployees\n| take 1000 \n| project identity"},"columns":{"value":"identity"}},"showOnPages":{"kind":"all"}}],"dataSources":[{"id":"23a37e1c-0a5c-4e9a-bcb0-e8727746d7fc","name":"adxiamlogstest01.centralus","clusterUri":"https://adxiamlogstest01.centralus.kusto.windows.net/","database":"iamlogs","kind":"manual-kusto","scopeId":"kusto"}],"pages":[{"name":"Page 1","id":"9136329e-3de6-41a4-9442-06b5206beb41"}]}